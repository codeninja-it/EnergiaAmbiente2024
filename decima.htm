<html>
	<head>
		<title>Paint!</title>
		<meta charset="utf-8" />
		<style>
			#lavagna{
				border: solid 1px black;
			}
		</style>
	</head>
	<body>
		<canvas width="500px" height="500px" id="lavagna"></canvas>
		
		<script>
			// ricordandomi un punto che rappresenta la posizione precedente del mouse;
			var puntoPrecedente = null;
			// prendo il riferimento al target
			var target = document.getElementById("lavagna");
			// mi costruisco una penna per disegnare
			var penna = target.getContext("2d");
			// e ne gestisco gli eventi
			target.onmousemove = function(circostanza){
				// tutte le volte che il mouse si muove
				// pulisco la console
				console.clear();
				// ci scrivo le coordinate del mouse
				console.log(
							circostanza.clientX + " " + 
							circostanza.clientY + " " +
							circostanza.buttons
							);
				// e coloro il pixel alle coordinate dove ci troviamo
				// se il pulsante sinistro del mouse è premuto
				if(circostanza.buttons == 1){
					if(puntoPrecedente == null){
						// imposto nel punto precedente
						// la posizione attuale
						puntoPrecedente = [circostanza.clientX, circostanza.clientY];
					} else {
						// devo disegnare la linea dal punto
						// precedente alla posizione attuale
						penna.beginPath();
							penna.moveTo(puntoPrecedente[0], puntoPrecedente[1]);
							penna.lineTo(circostanza.clientX, circostanza.clientY);
						penna.stroke();
						// e impostare la posizione precedente all'attuale
						puntoPrecedente = [circostanza.clientX, circostanza.clientY];
					}
				} else {
					if(puntoPrecedente != null){
						// devo disegnare una linea dal punto 
						// precedente alla posizione attuale
						penna.beginPath();
							penna.moveTo(puntoPrecedente[0], puntoPrecedente[1]);
							penna.lineTo(circostanza.clientX, circostanza.clientY);
						penna.stroke();
						// e svuoto il vecchio punto perchè ho alzato la penna
						puntoPrecedente = null;
					}
				}
			};
		
		</script>
		
	</body>
</html>